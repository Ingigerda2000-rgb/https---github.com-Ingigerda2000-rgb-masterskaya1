{% extends 'base.html' %}

{% block title %}Панель мастера{% endblock %}

{% block content %}
<div class="container py-3">
    <div class="row">
        <div class="col-12">
            <!-- Компактный заголовок с кнопками -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="h2 mb-0 text-purple fw-bold">
                    <i class="bi bi-tools me-2"></i>Панель мастера
                </h1>
            </div>
            
            <!-- Статистика в однотонных цветных карточках -->
            <div class="row g-3 mb-4">
                <div class="col-6 col-md-3">
                    <div class="card bg-purple text-white h-100 shadow-sm border-0">
                        <div class="card-body py-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="small text-white-75 mb-1 fw-medium">Товары</div>
                                    <div class="h4 mb-0 fw-bold">{{ total_products }}</div>
                                </div>
                                <div class="bg-white bg-opacity-25 rounded-circle p-2">
                                    <i class="bi bi-box fs-5"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-6 col-md-3">
                    <div class="card bg-green text-white h-100 shadow-sm border-0">
                        <div class="card-body py-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="small text-white-75 mb-1 fw-medium">Заказы</div>
                                    <div class="h4 mb-0 fw-bold">{{ total_orders }}</div>
                                    <div class="small text-white-75 mt-1 fw-normal">Ожидают: {{ pending_orders }}</div>
                                </div>
                                <div class="bg-white bg-opacity-25 rounded-circle p-2">
                                    <i class="bi bi-cart-check fs-5"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-6 col-md-3">
                    <div class="card bg-blue text-white h-100 shadow-sm border-0">
                        <div class="card-body py-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="small text-white-75 mb-1 fw-medium">Выручка</div>
                                    <div class="h4 mb-0 fw-bold">{{ total_income }} ₽</div>
                                </div>
                                <div class="bg-white bg-opacity-25 rounded-circle p-2">
                                    <i class="bi bi-currency-ruble fs-5"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-6 col-md-3">
                    <div class="card bg-yellow text-black h-100 shadow-sm border-0">
                        <div class="card-body py-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="small text-black-75 mb-1 fw-medium">Отзывы</div>
                                    <div class="h4 mb-0 fw-bold">{{ reviews_count }}</div>
                                </div>
                                <div class="bg-black bg-opacity-10 rounded-circle p-2">
                                    <i class="bi bi-star fs-5 text-black"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Компактная панель действий с цветами -->
            <div class="row g-3 mb-4">
                <div class="col-12">
                    <div class="card bg-purple-light border-0 shadow-sm">
                        <div class="card-body py-3">
                            <div class="d-flex flex-wrap gap-3">
                                <a href="/products/add/" class="btn btn-pink fw-medium">
                                    <i class="bi bi-plus-circle me-2"></i>Добавить товар
                                </a>
                                <a href="/custom_orders/constructor/" class="btn btn-green fw-medium">
                                    <i class="bi bi-palette me-2"></i>Шаблон конструктора
                                </a>
                                <a href="/materials/" class="btn btn-blue fw-medium">
                                    <i class="bi bi-boxes me-2"></i>Материалы и рецепты
                                </a>
                                <a href="/analytics/" class="btn btn-yellow fw-medium">
                                    <i class="bi bi-bar-chart me-2"></i>Аналитика
                                </a>
                                <a href="/orders/" class="btn btn-gray fw-medium">
                                    <i class="bi bi-archive me-2"></i>Архив
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Основной контент в 2 колонки -->
            <div class="row g-4">
                <!-- Левая колонка: Товары -->
                <div class="col-lg-8">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header py-3 bg-purple text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0 fw-bold">
                                    <i class="bi bi-box me-2"></i>Мои товары
                                    <span class="badge bg-white text-purple ms-2 fw-medium">{{ total_products }}</span>
                                </h5> 
                            </div>
                        </div>
                        <div class="card-body p-0">
                            {% if products %}
                            <div class="table-responsive" style="max-height: 380px;">
                                <table class="table table-hover mb-0">
                                    <thead class="bg-purple-light">
                                        <tr>
                                            <th width="60" class="ps-4 py-3 fw-semibold">№</th>
                                            <th width="50" class="py-3 fw-semibold">Фото</th>
                                            <th class="py-3 fw-semibold">Название</th>
                                            <th width="100" class="py-3 fw-semibold">Цена</th>
                                            <th width="100" class="py-3 fw-semibold">Остаток</th>
                                            <th width="120" class="text-center py-3 fw-semibold">Действия</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for product in products|slice:":10" %}
                                        <tr class="{% cycle '' 'bg-purple-light' %}">
                                            <td class="ps-4 py-3 fw-bold text-purple">{{ forloop.counter }}</td>
                                            <td class="py-3">
                                                {% if product.get_main_image %}
                                                <img src="{{ product.get_main_image.url }}" 
                                                     width="44" height="44" 
                                                     class="rounded border border-purple-light" 
                                                     alt="{{ product.name }}"
                                                     style="object-fit: cover;">
                                                {% else %}
                                                <div class="bg-purple-light d-flex align-items-center justify-content-center rounded border border-purple-light" 
                                                     style="width: 44px; height: 44px;">
                                                    <i class="bi bi-image text-purple fs-5"></i>
                                                </div>
                                                {% endif %}
                                            </td>
                                            <td class="py-3">
                                                <div class="fw-medium mb-1">{{ product.name|truncatechars:30 }}</div>
                                                <div class="text-muted small">{{ product.category.name|default:"-" }}</div>
                                            </td>
                                            <td class="py-3">
                                                <span class="fw-bold text-purple">{{ product.price }} ₽</span>
                                            </td>
                                            <td class="py-3">
                                                <span class="badge {% if product.stock_quantity > 0 %}bg-green text-white{% else %}bg-red text-white{% endif %} py-2 px-3 fw-medium">
                                                    {{ product.stock_quantity }}
                                                </span>
                                            </td>
                                            <td class="text-center py-3">
                                                <div class="btn-group" role="group">
                                                    <a href="{% url 'products:product_detail' product.id %}"
                                                       class="btn btn-outline-primary px-3 fw-medium" title="Просмотр">
                                                        <i class="bi bi-eye"></i>
                                                    </a>
                                                    <a href="{% url 'update_product' product.id %}" class="btn btn-outline-warning px-3 fw-medium" title="Редактировать">
                                                        <i class="bi bi-pencil"></i>
                                                    </a>
                                                    <a href="#" class="btn btn-outline-red px-3 fw-medium" title="Удалить">
                                                        <i class="bi bi-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="text-center py-5 bg-purple-light">
                                <i class="bi bi-box text-purple mb-3" style="font-size: 48px;"></i>
                                <h5 class="mb-2 text-purple fw-bold">Товаров пока нет</h5>
                                <p class="text-muted mb-4">Добавьте свой первый товар</p>
                                <a href="/products/add/" class="btn btn-pink fw-medium">
                                    <i class="bi bi-plus me-2"></i>Добавить товар
                                </a>
                            </div>
                            {% endif %}
                        </div>
                        {% if total_products > 10 %}
                        <div class="card-footer py-3 text-center bg-purple-light">
                            <a href="{% url 'master_products_list' %}" class="btn btn-pink fw-medium">
                                <i class="bi bi-list-ul me-2"></i>Показать все ({{ total_products }})
                            </a>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Материалы -->
                    <div class="card border-0 shadow-sm mt-4">
                        <div class="card-header py-3 bg-blue text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0 fw-bold">
                                    <i class="bi bi-boxes me-2"></i>Мои материалы
                                    <span class="badge bg-white text-blue ms-2 fw-medium">{{ materials|length }}</span>
                                </h5>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            {% if materials %}
                            <div class="table-responsive" style="max-height: 380px;">
                                <table class="table table-hover mb-0">
                                    <thead class="bg-blue-light">
                                        <tr>
                                            <th class="ps-4 py-3 fw-semibold">Материал</th>
                                            <th width="100" class="py-3 fw-semibold">Количество</th>
                                            <th width="100" class="py-3 fw-semibold">Стоимость</th>
                                            <th width="120" class="text-center py-3 fw-semibold">Действия</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for material in materials %}
                                        <tr class="{% if forloop.counter|divisibleby:2 %}bg-blue-light{% endif %}">
                                            <td class="ps-4 py-3">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 me-3">
                                                        <div class="avatar avatar-sm bg-light text-blue rounded-circle d-flex align-items-center justify-content-center">
                                                            <i class="bi bi-box"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1">
                                                        <h6 class="mb-0">
                                                            <a href="{% url 'materials:material_detail' material.id %}" class="text-decoration-none">
                                                                {{ material.name }}
                                                            </a>
                                                        </h6>
                                                        {% if material.color %}
                                                        <small class="text-muted">
                                                            <i class="bi bi-palette me-1"></i>{{ material.color }}
                                                        </small>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-3">
                                                <div class="fw-bold {% if material.current_quantity == 0 %}text-danger{% elif material.is_low_stock %}text-warning{% endif %}">
                                                    {{ material.current_quantity|floatformat:3 }} {{ material.get_unit_display }}
                                                </div>
                                                {% if material.min_quantity > 0 %}
                                                <small class="text-muted">Мин: {{ material.min_quantity|floatformat:3 }}</small>
                                                {% endif %}
                                            </td>
                                            <td class="py-3">
                                                <span class="fw-bold text-blue">{{ material.stock_value|floatformat:2 }} ₽</span>
                                            </td>
                                            <td class="text-center py-3">
                                                <div class="btn-group" role="group">
                                                    <a href="{% url 'materials:material_detail' material.id %}"
                                                       class="btn btn-outline-primary px-3 fw-medium" title="Просмотр">
                                                        <i class="bi bi-eye"></i>
                                                    </a>
                                                    <a href="{% url 'materials:material_update' material.id %}"
                                                       class="btn btn-outline-warning px-3 fw-medium" title="Редактировать">
                                                        <i class="bi bi-pencil"></i>
                                                    </a>
                                                    <a href="{% url 'materials:material_delete' material.id %}"
                                                       class="btn btn-outline-red px-3 fw-medium" title="Удалить">
                                                        <i class="bi bi-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="text-center py-5 bg-blue-light">
                                <i class="bi bi-boxes text-blue mb-3" style="font-size: 48px;"></i>
                                <h5 class="mb-2 text-blue fw-bold">Материалов пока нет</h5>
                                <p class="text-muted mb-4">Добавьте свой первый материал</p>
                                <a href="{% url 'materials:material_create' %}" class="btn btn-blue fw-medium">
                                    <i class="bi bi-plus me-2"></i>Добавить материал
                                </a>
                            </div>
                            {% endif %}
                        </div>
                        {% if materials|length > 5 %}
                        <div class="card-footer py-3 text-center bg-blue-light">
                            <a href="{% url 'materials:material_list' %}" class="btn btn-blue fw-medium">
                                <i class="bi bi-list-ul me-2"></i>Показать все ({{ materials|length }})
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Правая колонка: Заказы и статистика -->
                <div class="col-lg-4">
                    <!-- Последние заказы -->
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-header py-3 bg-green text-white">
                            <h5 class="mb-0 fw-bold">
                                <i class="bi bi-clock-history me-2"></i>Последние заказы
                            </h5>
                        </div>
                        <div class="card-body p-0">
                            {% if recent_orders %}
                            <div style="max-height: 220px; overflow-y: auto;">
                                {% for order in recent_orders|slice:":5" %}
                                <div class="border-bottom px-4 py-3 {% if forloop.last %}border-bottom-0{% endif %} bg-green-light">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <div class="fw-medium mb-1">Заказ #{{ order.id }}</div>
                                            <div class="text-muted small">{{ order.created_at|date:"d.m.Y H:i" }}</div>
                                        </div>
                                        <div class="text-end">
                                            <div class="fw-bold text-green mb-1">{{ order.total_amount }} ₽</div>
                                            <span class="badge {% if order.status == 'completed' %}bg-green text-white{% elif order.status == 'pending' %}bg-yellow text-black{% else %}bg-gray text-white{% endif %} py-1 px-2 fw-medium">
                                                {{ order.get_status_display }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% else %}
                            <div class="text-center py-4 bg-green-light">
                                <i class="bi bi-cart text-green mb-3" style="font-size: 32px;"></i>
                                <p class="text-muted mb-0">Заказов пока нет</p>
                            </div>
                            {% endif %}
                        </div>
                        {% if recent_orders|length > 5 %}
                        <div class="card-footer py-3 text-center bg-green-light">
                            <a href="/orders/" class="btn btn-green fw-medium">
                                <i class="bi bi-clock-history me-2"></i>Все заказы
                            </a>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Быстрая статистика -->
                    <div class="card border-0 shadow-sm">
                        <div class="card-header py-3 bg-blue text-white">
                            <h5 class="mb-0 fw-bold">
                                <i class="bi bi-graph-up me-2"></i>Статистика
                            </h5>
                        </div>
                        <div class="card-body p-0">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between align-items-center py-3 bg-blue-light">
                                    <span class="fw-medium text-blue">Товары на складе:</span>
                                    <span class="fw-bold text-blue-dark">{{ products_in_stock }}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center py-3 bg-yellow-light">
                                    <span class="fw-medium text-black">Новых заказов:</span>
                                    <span class="fw-bold text-black">{{ pending_orders }}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center py-3 bg-purple-light">
                                    <span class="fw-medium text-purple">Средний чек:</span>
                                    <span class="fw-bold text-purple-dark">{{ average_order_value }} ₽</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center py-3 bg-pink-light">
                                    <span class="fw-medium text-pink">Рейтинг:</span>
                                    <span class="fw-bold text-pink-dark">{{ average_rating|default:"-" }}/5</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Быстрые подсказки (аккордеон) -->
            <div class="accordion mt-4" id="tipsAccordion">
                <div class="accordion-item border-0 shadow-sm">
                    <h2 class="accordion-header" id="tipsHeading">
                        <button class="accordion-button collapsed py-3 bg-yellow text-black fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#tipsCollapse" aria-expanded="false" aria-controls="tipsCollapse">
                            <i class="bi bi-lightbulb me-3"></i>Быстрые советы для мастера
                        </button>
                    </h2>
                    <div id="tipsCollapse" class="accordion-collapse collapse" aria-labelledby="tipsHeading" data-bs-parent="#tipsAccordion">
                        <div class="accordion-body p-4 bg-yellow-light">
                            <div class="row g-4">
                                <div class="col-md-4">
                                    <div class="d-flex align-items-start p-3 bg-purple-light border border-purple rounded">
                                        <i class="bi bi-camera text-purple me-3 fs-4 flex-shrink-0"></i>
                                        <div>
                                            <div class="fw-bold text-purple mb-1">Качественные фото</div>
                                            <div class="text-purple-dark">Делайте фото при хорошем освещении, показывайте изделие с разных ракурсов</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex align-items-start p-3 bg-green-light border border-green rounded">
                                        <i class="bi bi-clock text-green me-3 fs-4 flex-shrink-0"></i>
                                        <div>
                                            <div class="fw-bold text-green mb-1">Время обработки</div>
                                            <div class="text-green-dark">Отвечайте на заказы в течение 24 часов, информируйте клиентов о статусе</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex align-items-start p-3 bg-blue-light border border-blue rounded">
                                        <i class="bi bi-chat-dots text-blue me-3 fs-4 flex-shrink-0"></i>
                                        <div>
                                            <div class="fw-bold text-blue mb-1">Общение с клиентами</div>
                                            <div class="text-blue-dark">Уточняйте детали перед началом работы, будьте вежливы и профессиональны</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
:root {
    /* Основные цвета */
    --purple: #b31dc4;
    --purple-light: #f0d4f5;
    --purple-dark: #8a1896;
    
    --green: #28a745;
    --green-light: #d4edda;
    --green-dark: #1e7e34;
    
    --blue: #17a2b8;
    --blue-light: #d1ecf1;
    --blue-dark: #117a8b;
    
    --yellow: #ffc107;
    --yellow-light: #fff8e1;
    --yellow-dark: #ffab00;
    
    --pink: #e83e8c;
    --pink-light: #fce4ec;
    --pink-dark: #d81b60;
    
    --red: #dc3545;
    --red-light: #f8d7da;
    --red-dark: #bd2130;
    
    --gray: #6c757d;
    --gray-light: #f8f9fa;
    --gray-dark: #495057;
    
    --black: #212529;
    --black-75: rgba(33, 37, 41, 0.75);
}

/* Улучшенная читаемость */
body {
    font-size: 16px;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Однотонные фоны */
.bg-purple { background-color: var(--purple) !important; }
.bg-green { background-color: var(--green) !important; }
.bg-blue { background-color: var(--blue) !important; }
.bg-yellow { background-color: var(--yellow) !important; }
.bg-pink { background-color: var(--pink) !important; }
.bg-red { background-color: var(--red) !important; }
.bg-gray { background-color: var(--gray) !important; }

/* Светлые фоны */
.bg-purple-light { background-color: var(--purple-light) !important; }
.bg-green-light { background-color: var(--green-light) !important; }
.bg-blue-light { background-color: var(--blue-light) !important; }
.bg-yellow-light { background-color: var(--yellow-light) !important; }
.bg-pink-light { background-color: var(--pink-light) !important; }
.bg-red-light { background-color: var(--red-light) !important; }
.bg-gray-light { background-color: var(--gray-light) !important; }

/* Цвета текста с улучшенной контрастностью */
.text-purple { color: var(--purple) !important; }
.text-purple-dark { color: var(--purple-dark) !important; }
.text-green { color: var(--green) !important; }
.text-green-dark { color: var(--green-dark) !important; }
.text-blue { color: var(--blue) !important; }
.text-blue-dark { color: var(--blue-dark) !important; }
.text-yellow { color: var(--yellow) !important; }
.text-yellow-dark { color: var(--yellow-dark) !important; }
.text-pink { color: var(--pink) !important; }
.text-pink-dark { color: var(--pink-dark) !important; }
.text-red { color: var(--red) !important; }
.text-red-dark { color: var(--red-dark) !important; }
.text-gray { color: var(--gray) !important; }
.text-black { color: var(--black) !important; }
.text-black-75 { color: var(--black-75) !important; }

/* Улучшенные жирные шрифты */
.fw-bold { font-weight: 700 !important; }
.fw-semibold { font-weight: 600 !important; }
.fw-medium { font-weight: 500 !important; }
.fw-normal { font-weight: 400 !important; }

/* Черный текст на желтом фоне */
.bg-yellow,
.bg-yellow-light {
    color: var(--black) !important;
}

.bg-yellow .text-white-75,
.bg-yellow-light .text-white-75 {
    color: var(--black-75) !important;
}

/* Цветные кнопки с улучшенной читаемостью */
.btn {
    font-size: 15px;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    transition: all 0.2s;
    line-height: 1.5;
}

.btn-sm {
    font-size: 14px;
    padding: 0.375rem 0.75rem;
}

.btn-purple {
    background-color: var(--purple) !important;
    border-color: var(--purple) !important;
    color: white !important;
}

.btn-purple:hover {
    background-color: var(--purple-dark) !important;
    border-color: var(--purple-dark) !important;
}

.btn-pink {
    background-color: var(--pink) !important;
    border-color: var(--pink) !important;
    color: white !important;
}

.btn-pink:hover {
    background-color: var(--pink-dark) !important;
    border-color: var(--pink-dark) !important;
}

.btn-green {
    background-color: var(--green) !important;
    border-color: var(--green) !important;
    color: white !important;
}

.btn-green:hover {
    background-color: var(--green-dark) !important;
    border-color: var(--green-dark) !important;
}

.btn-blue {
    background-color: var(--blue) !important;
    border-color: var(--blue) !important;
    color: white !important;
}

.btn-blue:hover {
    background-color: var(--blue-dark) !important;
    border-color: var(--blue-dark) !important;
}

.btn-yellow {
    background-color: var(--yellow) !important;
    border-color: var(--yellow) !important;
    color: var(--black) !important;
    font-weight: 500;
}

.btn-yellow:hover {
    background-color: var(--yellow-dark) !important;
    border-color: var(--yellow-dark) !important;
    color: var(--black) !important;
}

.btn-red {
    background-color: var(--red) !important;
    border-color: var(--red) !important;
    color: white !important;
}

.btn-red:hover {
    background-color: var(--red-dark) !important;
    border-color: var(--red-dark) !important;
}

.btn-gray {
    background-color: var(--gray) !important;
    border-color: var(--gray) !important;
    color: white !important;
}

.btn-gray:hover {
    background-color: var(--gray-dark) !important;
    border-color: var(--gray-dark) !important;
}

.btn-light-purple {
    background-color: var(--purple-light) !important;
    border-color: var(--purple-light) !important;
    color: var(--purple) !important;
    font-weight: 500;
}

.btn-light-purple:hover {
    background-color: var(--purple) !important;
    border-color: var(--purple) !important;
    color: white !important;
}

/* Outline кнопки */
.btn-outline-red {
    color: var(--red) !important;
    border-color: var(--red) !important;
    font-weight: 500;
}

.btn-outline-red:hover {
    background-color: var(--red) !important;
    color: white !important;
}

/* Баджи с улучшенной читаемостью */
.badge {
    font-size: 0.875em;
    padding: 0.35em 0.65em;
    border-radius: 6px;
    font-weight: 500;
    line-height: 1.3;
}

/* Стили для страницы */
.card {
    border: none;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    border-radius: 10px !important;
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
}

/* Улучшенная таблица */
.table {
    font-size: 15px;
}

.table th,
.table td {
    vertical-align: middle;
    padding: 1rem 1.5rem;
}

.table thead th {
    border-bottom-width: 2px;
    font-weight: 600;
    letter-spacing: 0.02em;
}

.table tbody tr {
    transition: background-color 0.2s;
}

/* Аккордеон */
.accordion-button {
    font-size: 16px;
    padding: 1rem 1.5rem;
    border-radius: 10px !important;
    transition: all 0.2s;
}

.accordion-button:not(.collapsed) {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.accordion-body {
    padding: 1.5rem !important;
}

.list-group-item {
    padding: 1rem 1.5rem;
    border-color: rgba(0,0,0,0.05) !important;
}

/* Улучшенные отступы и интерлиньяж */
h1, h2, h3, h4, h5, h6 {
    line-height: 1.3;
    margin-bottom: 0.5rem;
}

p, .small, .fs-xxsmall {
    line-height: 1.6;
    margin-bottom: 0.5rem;
}

/* Улучшенное чередование строк в таблице */
tr:nth-child(even) {
    background-color: rgba(179, 29, 196, 0.03) !important;
}

tr:hover {
    background-color: rgba(179, 29, 196, 0.07) !important;
}

/* Улучшенный скроллбар */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--purple-light);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--purple);
}

/* Иконки в кружках на желтом фоне */
.bg-yellow .bg-white.bg-opacity-25 {
    background-color: rgba(0, 0, 0, 0.1) !important;
}

.bg-yellow .bi-star {
    color: var(--black) !important;
}

/* Улучшенная цветовая схема для желтого */
.bg-yellow {
    background-color: #ffc107 !important;
    color: var(--black) !important;
}

.bg-yellow-light {
    background-color: #fff8e1 !important;
    color: var(--black) !important;
}

/* Анимации */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.card {
    animation: fadeIn 0.3s ease-out;
}

/* Улучшенные контрасты для текста */
.text-muted {
    color: #6c757d !important;
    opacity: 0.9;
}

/* Улучшенные размеры шрифтов */
.h1 { font-size: 2.5rem; }
.h2 { font-size: 2rem; }
.h3 { font-size: 1.75rem; }
.h4 { font-size: 1.5rem; }
.h5 { font-size: 1.25rem; }
.h6 { font-size: 1rem; }

.small { font-size: 0.875rem; }
.fs-xxsmall { font-size: 0.75rem; }

/* Отзывчивые отступы */
@media (max-width: 768px) {
    body {
        font-size: 15px;
    }
    
    .container {
        padding-left: 15px;
        padding-right: 15px;
    }
    
    .btn {
        font-size: 14px;
        padding: 0.375rem 0.75rem;
    }
    
    .table th,
    .table td {
        padding: 0.75rem 1rem;
    }
    
    .h2 { font-size: 1.75rem; }
    .h3 { font-size: 1.5rem; }
    .h4 { font-size: 1.25rem; }
    .h5 { font-size: 1.1rem; }
}
</style>
{% endblock %}