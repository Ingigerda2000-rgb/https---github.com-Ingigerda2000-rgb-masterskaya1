{% load order_filters %}

{% comment %}
Макрос для отображения статуса заказа
Использование: {% include "includes/order_status.html" with order=order show_progress=True %}
{% endcomment %}

<div class="order-status">
    <div class="d-flex align-items-center">
        <div class="status-icon me-2">
            <i class="bi {{ order.status_icon }} fs-5 text-{{ order.status_color }}"></i>
        </div>
        <div class="status-content">
            <div class="d-flex align-items-center">
                <span class="badge bg-{{ order.status_color }} fs-6">
                    {{ order.get_status_display }}
                </span>
                {% if order.is_final_status %}
                <i class="bi bi-check-circle-fill text-success ms-2" title="Заказ завершен"></i>
                {% endif %}
            </div>
            <small class="text-muted d-block mt-1">
                {{ order.status_description }}
            </small>
        </div>
    </div>
    
    {% if show_progress %}
    <div class="status-progress mt-2">
        <div class="progress" style="height: 6px;">
            <div class="progress-bar bg-{{ order.status_color }}" 
                 role="progressbar" 
                 style="width: {{ order.get_status_progress }}%"
                 aria-valuenow="{{ order.get_status_progress }}" 
                 aria-valuemin="0" 
                 aria-valuemax="100">
            </div>
        </div>
        <small class="text-muted">
            Прогресс выполнения: {{ order.get_status_progress }}%
        </small>
    </div>
    {% endif %}
</div>